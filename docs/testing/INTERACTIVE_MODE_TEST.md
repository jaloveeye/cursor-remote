# Cursor CLI 대화형 모드 테스트

## 테스트 목적

대화형 모드로 전환하여 세션 컨텍스트가 유지되는지 확인합니다.

## 변경 사항

### Extension 코드 수정
- `cli-handler.ts`: `-p` 옵션 제거, `--force` 옵션 제거
- 대화형 모드로 실행: `agent --output-format json "프롬프트"`

## 테스트 시나리오

### 1단계: 첫 번째 프롬프트
1. 모바일 앱에서 프롬프트 전송: "안녕하세요. 제 이름은 김형진입니다."
2. Extension Output Channel에서 확인:
   - CLI 실행 명령어 확인
   - JSON 응답 수신 확인
3. 프로세스가 자동으로 종료되는지 확인

### 2단계: 두 번째 프롬프트 (세션 유지 테스트)
1. 모바일 앱에서 프롬프트 전송: "제 이름이 뭐였죠?"
2. Extension Output Channel에서 확인:
   - 새로운 프로세스가 생성되는지 확인
   - 이전 대화를 기억하는지 확인
3. AI 응답 확인:
   - "김형진님"이라고 답하는지 확인
   - 또는 "이전 대화를 기억하지 못함"이라고 답하는지 확인

### 3단계: 프로세스 동작 확인
1. Extension Output Channel에서 프로세스 종료 로그 확인
2. 프로세스가 무한정 대기하는지 확인
3. 타임아웃이 발생하는지 확인

## 예상 결과

### 성공 시나리오
- 두 번째 프롬프트에서 이전 대화를 기억함
- "김형진님"이라고 올바르게 답함
- 세션 컨텍스트가 유지됨

### 실패 시나리오
- 두 번째 프롬프트에서 이전 대화를 기억하지 못함
- 프로세스가 종료되지 않고 무한정 대기
- JSON 출력 형식이 제대로 작동하지 않음

## 롤백 계획

대화형 모드가 작동하지 않으면:
1. `-p` 옵션 복원
2. 대화 히스토리 관리 방식으로 전환
