---
description: Git Flow 규칙 - 모든 코드 변경은 Git Flow를 따라야 함
alwaysApply: true
---

# Git Flow 규칙

## ⚠️ 필수 규칙

**모든 코드 변경 작업은 반드시 Git Flow 규칙을 따라야 합니다.**

## 브랜치 전략

### 1. 직접 작업 금지 브랜치
- ❌ **`main` 브랜치에 직접 커밋 금지**
- ❌ **`develop` 브랜치에 직접 커밋 금지** (가능하지만 권장하지 않음)

### 2. 작업 전 필수 확인
코드 변경 작업을 시작하기 전에 **반드시** 현재 브랜치를 확인:

```bash
git branch --show-current
```

### 3. Feature 브랜치 생성 (새 기능 개발)
새 기능을 개발할 때:

```bash
# develop 브랜치로 이동
git checkout develop
git pull origin develop

# feature 브랜치 생성
git flow feature start <feature-name>
```

**예시:**
```bash
git flow feature start session-management
git flow feature start add-chat-history
```

### 4. Bugfix 브랜치 생성 (버그 수정)
버그를 수정할 때:

```bash
git checkout develop
git pull origin develop
git flow bugfix start <bugfix-name>
```

### 5. 작업 완료 후
작업이 완료되면:

```bash
# Feature 완료
git flow feature finish <feature-name>

# Bugfix 완료
git flow bugfix finish <bugfix-name>
```

**주의**: `git merge`를 직접 사용하지 말고 `git flow feature finish` 또는 `git flow bugfix finish`를 사용하세요.

## 커밋 메시지 규칙

### 형식
```
<type>: <subject>

<body>

<footer>
```

### Type 종류
- `feat`: 새로운 기능
- `fix`: 버그 수정
- `docs`: 문서만 변경
- `style`: 코드 스타일 변경 (의미 변경 없음)
- `refactor`: 리팩토링
- `test`: 테스트 추가/수정
- `chore`: 빌드 프로세스 또는 보조 도구 변경

### 예시
```
feat: 세션 격리 및 클라이언트 제어 세션 관리

- 클라이언트별 독립적인 세션 관리
- WebSocket 연결 시 고유 clientId 자동 생성
- 클라이언트에서 새 세션 시작 여부 결정

Closes #123
```

## 작업 흐름 체크리스트

코드 변경 작업을 시작할 때:

1. ✅ 현재 브랜치 확인 (`git branch --show-current`)
2. ✅ `main` 또는 `develop`에 있으면 feature/bugfix 브랜치 생성
3. ✅ 작업 진행
4. ✅ 커밋 (Conventional Commits 형식)
5. ✅ 작업 완료 시 `git flow feature finish` 또는 `git flow bugfix finish`

## AI Assistant 가이드라인

코드 변경 작업을 할 때:

1. **항상 현재 브랜치 확인**
   - `main` 또는 `develop`에 있으면 경고
   - feature/bugfix 브랜치 생성 제안

2. **브랜치 생성 제안**
   - 새 기능: `git flow feature start <name>`
   - 버그 수정: `git flow bugfix start <name>`

3. **커밋 메시지 형식 준수**
   - Conventional Commits 형식 사용
   - `feat:`, `fix:`, `docs:` 등 적절한 type 사용

4. **작업 완료 시**
   - `git flow feature finish` 또는 `git flow bugfix finish` 제안
   - 직접 `git merge` 사용 금지

## 예외 상황

- 문서만 수정하는 경우: `develop`에 직접 커밋 가능 (하지만 feature 브랜치 권장)
- 긴급 수정 (hotfix): `main`에서 `hotfix/*` 브랜치 생성

## 중요 사항

⚠️ **절대 `main` 브랜치에 직접 커밋하지 마세요!**
⚠️ **`develop` 브랜치에 직접 작업하는 것보다 feature/bugfix 브랜치를 사용하세요!**
⚠️ **`git merge`를 직접 사용하지 말고 `git flow feature finish`를 사용하세요!**
